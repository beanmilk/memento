angular.module("Memento",["underscore"]).factory("Memento",function(){return function(){this.stack=[],this.cursor=0;var t=this,s=function(){console.log("CURSOR",t.cursor),console.log("STACK:",t.stack)};this.canUndo=function(){return this.stack.length&&this.cursor>1},this.undo=function(){return this.canUndo()?(this.cursor--,s(),this.stack[this.cursor-1]):void 0},this.canRedo=function(){return this.stack.length&&this.cursor<=this.stack.length},this.redo=function(){return this.canRedo()?(this.cursor++,s(),this.stack[this.cursor-1]):void 0},this.push=function(t){return _.isEqual(this.stack[this.cursor-1],t)?(console.log("not pushing"),!1):(this.cursor<this.stack.length&&(this.stack=this.stack.slice(0,this.cursor)),this.cursor++,this.stack.push(angular.copy(t)),void s())}}});